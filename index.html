<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµå¢ƒå¡”ç½— - ä¸‰ç‰Œé˜µå åœ</title>
    <style>
        :root { --bg: #05070a; --gold: #d4af37; --text: #f0f0f0; --card-w: 120px; --card-h: 210px; }
        body { background: var(--bg); color: var(--text); font-family: "serif"; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 10px; }
        
        h1 { color: var(--gold); letter-spacing: 6px; margin-bottom: 5px; text-shadow: 0 0 15px rgba(212, 175, 55, 0.4); }
        .subtitle { font-size: 0.9em; opacity: 0.7; margin-bottom: 20px; }

        /* ä¸‰ç‰Œé˜µå®¹å™¨ */
        .spread { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
        .slot { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .slot-label { color: var(--gold); font-weight: bold; font-size: 0.9em; }

        /* å¡ç‰‡åŸºç¡€æ ·å¼ */
        .card { width: var(--card-w); height: var(--card-h); perspective: 1000px; cursor: pointer; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s; transform-style: preserve-3d; }
        .is-flipped { transform: rotateY(180deg); }

        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 8px; border: 1px solid var(--gold); box-shadow: 0 0 15px rgba(0,0,0,0.5); }
        
        /* å¡èƒŒï¼šä½¿ç”¨ç¥ç§˜å‡ ä½•çº¹ç† */
        .card-back { background: #1a1a2e; display: flex; justify-content: center; align-items: center; font-size: 2em; }
        
        /* å¡é¢ï¼šæ˜¾ç¤ºçœŸå®å›¾ç‰‡ */
        .card-front { background: #000; transform: rotateY(180deg); overflow: hidden; }
        .card-front img { width: 100%; height: 100%; object-fit: cover; }
        .reversed { transform: rotate(180deg); }

        /* è§£é‡Šæ–‡æœ¬åŒº */
        #interpretation { max-width: 800px; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 10px; display: none; margin-top: 20px; border-top: 1px solid var(--gold); }
        .inter-item { margin-bottom: 15px; border-bottom: 1px dashed #444; padding-bottom: 10px; }
        .inter-item b { color: var(--gold); }

        button { background: transparent; border: 1px solid var(--gold); color: var(--gold); padding: 10px 30px; border-radius: 5px; cursor: pointer; font-size: 1em; margin-top: 20px; }
        button:hover { background: var(--gold); color: #000; }
        
        @media (max-width: 450px) { :root { --card-w: 100px; --card-h: 175px; } }
    </style>
</head>
<body>

    <h1>çµå¢ƒå¡”ç½—</h1>
    <p class="subtitle">è¿‡å» Â· ç°åœ¨ Â· æœªæ¥</p>

    <div class="spread">
        <div class="slot">
            <span class="slot-label">è¿‡å»</span>
            <div class="card" onclick="flip(0)"><div class="card-inner" id="c0"><div class="card-face card-back">ğŸ”®</div><div class="card-face card-front" id="f0"></div></div></div>
        </div>
        <div class="slot">
            <span class="slot-label">ç°åœ¨</span>
            <div class="card" onclick="flip(1)"><div class="card-inner" id="c1"><div class="card-face card-back">ğŸ”®</div><div class="card-face card-front" id="f1"></div></div></div>
        </div>
        <div class="slot">
            <span class="slot-label">æœªæ¥</span>
            <div class="card" onclick="flip(2)"><div class="card-inner" id="c2"><div class="card-face card-back">ğŸ”®</div><div class="card-face card-front" id="f2"></div></div></div>
        </div>
    </div>

    <button onclick="shuffleDeck()">é‡æ–°æ´—ç‰Œ</button>

    <div id="interpretation"></div>

    <script>
        // æ„å»º 78 å¼ ç‰Œæ•°æ®
        const suits = ['wands', 'cups', 'swords', 'pentacles'];
        const courtCards = ['Page', 'Knight', 'Queen', 'King'];
        let fullDeck = [];

        // 1. å¤§é˜¿å¡çº³ (0-21)
        const majors = ["The Fool","The Magician","The High Priestess","The Empress","The Emperor","The Hierophant","The Lovers","The Chariot","Strength","The Hermit","Wheel of Fortune","Justice","The Hanged Man","Death","Temperance","The Devil","The Tower","The Star","The Moon","The Sun","Judgement","The World"];
        majors.forEach((name, i) => {
            fullDeck.push({ name, img: `m${i < 10 ? '0'+i : i}`, type: 'Major' });
        });

        // 2. å°é˜¿å¡çº³ (56å¼ )
        suits.forEach(suit => {
            // æ•°å­—ç‰Œ 1(Ace)-10
            for(let i=1; i<=10; i++) {
                let n = i === 1 ? 'Ace' : i;
                fullDeck.push({ name: `${n} of ${suit}`, img: `${suit.charAt(0)}${i < 10 ? '0'+i : i}`, type: 'Minor' });
            }
            // å®«å»·ç‰Œ
            courtCards.forEach((role, index) => {
                fullDeck.push({ name: `${role} of ${suit}`, img: `${suit.charAt(0)}${11+index}`, type: 'Minor' });
            });
        });

        let drawnCards = [null, null, null];
        let flippedCount = 0;

        function shuffleDeck() {
            location.reload(); // æœ€ç®€å•çš„é‡ç½®æ–¹å¼
        }

        function flip(index) {
            if (drawnCards[index]) return;

            // éšæœºæŠ½å–ä¸€å¼ æ²¡æŠ½è¿‡çš„ç‰Œ
            let card;
            do {
                card = fullDeck[Math.floor(Math.random() * fullDeck.length)];
            } while (drawnCards.includes(card));

            const isReversed = Math.random() > 0.5;
            drawnCards[index] = { ...card, isReversed };

            // è®¾ç½®å›¾ç‰‡ (å¼•ç”¨ç»´ç‰¹å¡”ç½—å¼€æºå›¾åº“)
            // å›¾ç‰‡è·¯å¾„è§„åˆ™ï¼šm00.jpg æ˜¯å¤§ç‰Œï¼Œw01.jpg æ˜¯æƒæ–Ace
            const imgUrl = `https://www.sacred-texts.com/tarot/pkt/img/${card.img}.jpg`;
            const frontEl = document.getElementById(`f${index}`);
            frontEl.innerHTML = `<img src="${imgUrl}" class="${isReversed ? 'reversed' : ''}">`;

            // æ‰§è¡Œç¿»è½¬
            document.getElementById(`c${index}`).classList.add('is-flipped');
            
            flippedCount++;
            if (flippedCount === 3) showMeaning();
        }

        function showMeaning() {
            const interDiv = document.getElementById('interpretation');
            interDiv.style.display = 'block';
            const labels = ["è¿‡å»", "ç°åœ¨", "æœªæ¥"];
            
            let html = '<h3 style="color:var(--gold); text-align:center;">--- å¯ç¤ºå½• ---</h3>';
            drawnCards.forEach((c, i) => {
                html += `
                    <div class="inter-item">
                        <b>${labels[i]} - ${c.name} ${c.isReversed ? '(é€†ä½)' : '(æ­£ä½)'}</b><br>
                        <span style="font-size:0.9em; opacity:0.8;">
                            ${getBasicMeaning(c.name, c.isReversed)}
                        </span>
                    </div>
                `;
            });
            interDiv.innerHTML = html;
        }

        function getBasicMeaning(name, isRev) {
            // è¿™é‡Œå¯ä»¥æ‰©å……æ›´è¯¦ç»†çš„ 78*2 ç§è§£é‡Šã€‚ç›®å‰åšä¸€ä¸ªé€šç”¨é€»è¾‘ï¼š
            const base = "è¿™å¼ ç‰Œå‡ºç°åœ¨è¿™é‡Œï¼Œé¢„ç¤ºç€";
            if (!isRev) return base + ` ${name} çš„èƒ½é‡æ­£åœ¨æ­£å‘å¼•å¯¼ä½ ï¼Œå»ºè®®ä¿æŒä¸“æ³¨ï¼Œé¡ºåŠ¿è€Œä¸ºã€‚`;
            return base + ` ${name} çš„èƒ½é‡ç›®å‰å¤„äºé˜»ç¢æˆ–åè½¬çŠ¶æ€ï¼Œæé†’ä½ éœ€è¦æ¢ä¸ªè§’åº¦æ€è€ƒï¼Œæˆ–è€…æš‚ç¼“è¡ŒåŠ¨ã€‚`;
        }
    </script>
</body>
</html>
